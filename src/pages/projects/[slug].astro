---
import Header from "../../components/Header.astro";
import DynamicIsland from "../../components/DynamicIsland.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const projects = await getCollection("projects");
  return projects.map(p => ({ params: { slug: p.data.slug }, props: { project: p } }));
}
const { project } = Astro.props;
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{project.data.title} • Luca Ficano Latimer</title>
    <meta name="description" content={project.data.summary} />
    <link rel="stylesheet" href="/site.css">
  </head>
  <body>
    <Header />
    <DynamicIsland />
    <main class="container" style="max-width:900px">
      <a class="btn" href="/projects">← Back to Projects</a>
      <h1>{project.data.title}</h1>
      <div class="kicker" style="margin-bottom:10px;">
        {project.data.year}{project.data.stack?.length ? ` • ${project.data.stack.join(", ")}` : ""}
      </div>
      <article style="line-height:1.65">
        <slot />
      </article>
      <div style="margin-top:16px; display:flex; gap:12px; flex-wrap:wrap;">
        {project.data.repo ? <a class="btn" href={project.data.repo} target="_blank" rel="noreferrer">Repository</a> : null}
        {project.data.live ? <a class="btn primary" href={project.data.live} target="_blank" rel="noreferrer">Play</a> : null}
      </div>
    </main>
  </body>
</html>
