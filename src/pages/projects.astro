---
import { getCollection } from "astro:content";
const items = await getCollection("projects");
const projects = items.sort((a, b) => a.data.order - b.data.order);
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Projects</title>
    <meta name="description" content="Game dev and CS projects" />
  </head>
  <body style="margin:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;">
    <main style="max-width:1080px;margin:0 auto;padding:24px;">
      <h1 style="font-size:32px;margin-bottom:16px;">Projects</h1>
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:20px;">
        {projects.map(p => (
          <a href={`/projects/${p.data.slug}/`} style="text-decoration:none;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;display:block;">
            {p.data.thumb ? <img src={p.data.thumb} alt={p.data.title} style="width:100%;height:160px;object-fit:cover;" /> : null}
            <div style="padding:14px;">
              <div style="font-weight:600;font-size:18px;color:#111827;">{p.data.title}</div>
              <div style="font-size:12px;color:#6b7280;margin:4px 0;">{p.data.year} â€¢ {p.data.stack.join(", ")}</div>
              <p style="font-size:14px;color:#374151;margin:6px 0 10px;">{p.data.summary}</p>
              <div style="display:flex;gap:10px;font-size:13px;">
                {p.data.repo ? <span>Repo</span> : null}
                {p.data.live ? <span>Live</span> : null}
              </div>
            </div>
          </a>
        ))}
      </div>
    </main>
  </body>
</html>
