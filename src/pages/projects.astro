---
import Header from "../components/Header.astro";
import DynamicIsland from "../components/DynamicIsland.astro";
import { getCollection } from "astro:content";

const items = await getCollection("projects").catch(() => []);
const projects = items.sort((a,b) => a.data.order - b.data.order);
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Projects • Luca Ficano Latimer</title>
    <meta name="description" content="Game dev and CS projects" />
    <link rel="stylesheet" href="/site.css">
  </head>
  <body>
    <Header />
    <DynamicIsland />
    <main class="container">
      <h1>Projects</h1>
      <div class="grid">
        {projects.map(p => (
          <a href={`/projects/${p.data.slug}/`} class="card" aria-label={`Open ${p.data.title}`}>
            {p.data.thumb ? <img class="thumb" src={p.data.thumb} alt={p.data.title} /> : null}
            <div class="card-body">
              <div style="font-weight:600; font-size:18px">{p.data.title}</div>
              <div class="kicker">{p.data.year}{p.data.stack?.length ? ` • ${p.data.stack.join(", ")}` : ""}</div>
              <p style="margin:6px 0 0">{p.data.summary}</p>
            </div>
          </a>
        ))}
      </div>
    </main>
  </body>
</html>
